[DEFAULT]
output_path                = .
log_path                   = $output_path\Logs
log_queries                = True
overwrite_working_dbs      = True
overwrite_reporting_tables = True
logging_config             = R:\Software\QueryRunner\conf\logging.ini

[databases]

    [[GCBM Output]]
    enabled          = True
    original_db_path = $results_path
    working_db_path  = $output_path\results_processed.db

[queries]

    [[Create reporting table: r_change_type_categories]]
    order = 0
    sql   = sql\00a_create_r_change_type_categories.sql

    [[Create reporting table: r_pool_collections]]
    order = 0
    sql   = sql\00b_create_r_pool_collections.sql

    [[Create reporting table: r_pool_collection_pools]]
    order = 0
    sql   = sql\00c_create_r_pool_collection_pools.sql

    [[Create reporting table: r_flux_indicators]]
    order = 0
    sql   = sql\00d_create_r_flux_indicators.sql

    [[Create reporting table: r_flux_indicator_collections]]
    order = 0
    sql   = sql\00e_create_r_flux_indicator_collections.sql

    [[Create reporting table: r_flux_indicator_collection_flux_indicators]]
    order = 0
    sql   = sql\00f_create_r_flux_indicator_collection_flux_indicators.sql

    [[Create reporting table: r_stock_changes]]
    order = 0
    sql   = sql\00g_create_r_stock_changes.sql

    [[Create reporting table: r_pool_indicators]]
    order = 0
    sql   = sql\00h_create_r_pool_indicators.sql

    [[Populate change type categories]]
    order = 1
    sql   = sql\01_populate_change_type_categories.sql

        [[[features]]]
        
            [[[[multi_named_parameters]]]]
            keys = name,
            value_sets = """[\
                ["Annual Process"], \
                ["Disturbance"], \
                ["Combined"], \
            ]"""

    [[Populate pool collections]]
    order = 2
    sql   = sql\02_populate_pool_collections.sql

        [[[features]]]
        
            [[[[multi_named_parameters]]]]
            keys = name,
            value_sets = """[\
                ["All biomass"], \
                ["CO2"], \
                ["CH4"], \
                ["CO"], \
                ["Live biomass"], \
                ["DOM"], \
                ["deadwood"], \
                ["litter"], \
                ["Softwood biomass"], \
                ["Hardwood biomass"], \
                ["Snags"], \
                ["Merch"], \
                ["Hardwood merch"], \
                ["Stem snag"], \
                ["Foliage"], \
                ["Aboveground very fast soil"], \
                ["Other"], \
                ["Other litter"], \
                ["Coarse roots"], \
                ["Fast soil"], \
                ["Fine roots"], \
                ["Very fast soil"], \
                ["Aboveground slow soil / CO2"], \
                ["Belowground slow soil / CO2"], \
                ["Belowground very fast soil"], \
                ["Aboveground fast soil"], \
                ["Belowground fast soil"], \
                ["Medium soil"], \
                ["Aboveground slow soil"], \
                ["Belowground slow soil"], \
                ["Softwood stem snag"], \
                ["Softwood branch snag"], \
                ["Hardwood stem snag"], \
                ["Hardwood branch snag"], \
                ["Aboveground live biomass"], \
                ["Belowground live biomass"], \
                ["Atmosphere"], \
                ["Overmature decline"], \
                ["Products"], \
                ["Black carbon"], \
                ["Peat"], \
                ["Soil"], \
                ["DissolvedOrganicCarbon"], \
				["FeatherMossLive"], \
				["SphagnumMossLive"], \
				["FeatherMossFast"], \
				["SphagnumMossFast"], \
				["FeatherMossSlow"], \
				["SphagnumMossSlow"], \
				["DissolvedOrganicCarbon"], \
				["WoodyFoliageLive"], \
				["WoodyStemsBranchesLive"], \
				["WoodyRootsLive"], \
				["SedgeFoliageLive"], \
				["SedgeRootsLive"], \
				["WoodyStemsBranchesDead"], \
				["WoodyFoliageDead"], \
				["WoodyRootsDead"], \
				["SedgeFoliageDead"], \
				["SedgeRootsDead"], \
				["FeathermossDead"], \
				["Acrotelm"], \
				["Catotelm"], \
            ]"""

    [[Populate pool collections with pools]]
    order = 3
    sql   = sql\03_populate_pool_collection_pools.sql

        [[[features]]]
        
            [[[[multi_named_parameters]]]]
            keys = name, pools
            value_sets = """[\
                ["All biomass", "'softwoodmerch', 'softwoodfoliage', 'softwoodother', 'softwoodcoarseroots', 'softwoodfineroots', 'hardwoodmerch', 'hardwoodfoliage', 'hardwoodother', 'hardwoodcoarseroots', 'hardwoodfineroots', 'abovegroundveryfastsoil', 'belowgroundveryfastsoil', 'abovegroundfastsoil', 'belowgroundfastsoil', 'mediumsoil', 'abovegroundslowsoil', 'belowgroundslowsoil', 'softwoodstemsnag', 'softwoodbranchsnag', 'hardwoodstemsnag', 'hardwoodbranchsnag'"], \
                ["CO2", "'co2'"], \
                ["CH4", "'ch4'"], \
                ["CO", "'co'"], \
                ["Live biomass", "'softwoodmerch', 'softwoodfoliage', 'softwoodother', 'softwoodcoarseroots', 'softwoodfineroots', 'hardwoodmerch', 'hardwoodfoliage', 'hardwoodother', 'hardwoodcoarseroots', 'hardwoodfineroots', 'FeatherMossLive', 'SphagnumMossLive', 'WoodyFoliageLive', 'WoodyStemsBranchesLive', 'WoodyRootsLive', 'SedgeFoliageLive', 'SedgeRootsLive'"], \
                ["DOM", "'abovegroundveryfastsoil', 'belowgroundveryfastsoil', 'abovegroundfastsoil', 'belowgroundfastsoil', 'mediumsoil', 'abovegroundslowsoil', 'belowgroundslowsoil', 'softwoodstemsnag', 'softwoodbranchsnag', 'hardwoodstemsnag', 'hardwoodbranchsnag', 'FeatherMossFast','SphagnumMossFast','FeatherMossSlow','SphagnumMossSlow','WoodyStemsBranchesDead','WoodyFoliageDead','WoodyRootsDead','SedgeFoliageDead','SedgeRootsDead','FeathermossDead'"], \
                ["Soil", "'belowgroundveryfastsoil', 'belowgroundslowsoil'"], \
                ["Litter", "'abovegroundveryfastsoil', 'abovegroundfastsoil', 'abovegroundslowsoil', 'WoodyStemsBranchesDead', 'WoodyFoliageDead','SedgeFoliageDead','FeathermossDead'"], \
                ["Deadwood", "'belowgroundfastsoil', 'mediumsoil', 'softwoodstemsnag', 'softwoodbranchsnag', 'hardwoodstemsnag', 'hardwoodbranchsnag'"], \
                ["dissolvedorganiccarbon", "'dissolvedorganiccarbon'"], \
                ["Softwood biomass", "'softwoodmerch', 'softwoodfoliage', 'softwoodother', 'softwoodcoarseroots', 'softwoodfineroots'"], \
                ["Hardwood biomass", "'hardwoodmerch', 'hardwoodfoliage', 'hardwoodother', 'hardwoodcoarseroots', 'hardwoodfineroots'"], \
                ["Snags", "'softwoodstemsnag', 'softwoodbranchsnag', 'hardwoodstemsnag', 'hardwoodbranchsnag'"], \
                ["Merch", "'softwoodmerch', 'hardwoodmerch'"], \
                ["Hardwood merch", "'hardwoodmerch'"], \
                ["Stem snag", "'softwoodstemsnag', 'hardwoodstemsnag'"], \
                ["Foliage", "'softwoodfoliage', 'hardwoodfoliage', 'WoodyFoliageLive'"], \
                ["Aboveground very fast soil", "'abovegroundveryfastsoil'"], \
                ["Other", "'softwoodother', 'hardwoodother'"], \
                ["Other litter", "'abovegroundfastsoil', 'softwoodbranchsnag'"], \
                ["Coarse roots", "'softwoodcoarseroots', 'hardwoodcoarseroots'"], \
                ["Fast soil", "'abovegroundfastsoil', 'belowgroundfastsoil'"], \
                ["Fine roots", "'softwoodfineroots', 'hardwoodfineroots'"], \
                ["Very fast soil", "'abovegroundveryfastsoil', 'belowgroundveryfastsoil'"], \
                ["Aboveground slow soil / CO2", "'abovegroundslowsoil', 'co2'"], \
                ["Belowground slow soil / CO2", "'belowgroundslowsoil', 'co2'"], \
                ["Belowground very fast soil", "'belowgroundveryfastsoil'"], \
                ["Aboveground fast soil", "'abovegroundfastsoil'"], \
                ["Belowground fast soil", "'belowgroundfastsoil'"], \
                ["Medium soil", "'mediumsoil'"], \
                ["Aboveground slow soil", "'abovegroundslowsoil'"], \
                ["Belowground slow soil", "'belowgroundslowsoil'"], \
                ["Softwood stem snag", "'softwoodstemsnag'"], \
                ["Softwood branch snag", "'softwoodbranchsnag'"], \
                ["Hardwood stem snag", "'hardwoodstemsnag'"], \
                ["Hardwood branch snag", "'hardwoodbranchsnag'"], \
                ["Aboveground live biomass", "'softwoodmerch', 'softwoodfoliage', 'softwoodother', 'hardwoodmerch', 'hardwoodfoliage', 'hardwoodother', 'FeatherMossLive', 'SphagnumMossLive', 'WoodyFoliageLive', 'WoodyStemsBranchesLive','SedgeFoliageLive'"], \
                ["Belowground live biomass", "'softwoodcoarseroots', 'softwoodfineroots', 'hardwoodcoarseroots', 'hardwoodfineroots', 'WoodyRootsLive', 'SedgeRootsLive'"], \
                ["Atmosphere", "'atmosphere'"], \
                ["Overmature decline", "'overmaturelosses'"], \
                ["Products", "'products'"], \
                ["Black carbon", "'blackcarbon'"], \
                ["Peat", "'peat'"], \
				["Live biomass camp", "'FeatherMossLive', 'SphagnumMossLive', 'WoodyFoliageLive', 'WoodyStemsBranchesLive', 'WoodyRootsLive', 'SedgeFoliageLive', 'SedgeRootsLive"], \
				["Shrub aboveground biomass", "'WoodyFoliageLive', 'WoodyStemsBranchesLive'"],\
				["Shrub belowground biomass", "'WoodyRootsLive'"],\
				["Peat core eq", "'FeatherMossLive', 'SphagnumMossLive', 'WoodyRootsLive', 'SedgeRootsLive', 'WoodyRootsDead', 'SedgeRootsDead', 'FeathermossDead','Acrotelm','Catotelm'"], \
				["Acrotelm", "'Acrotelm'"], \
				["Catotelm", "'Catotelm'"], \
				["SedgeFoliageLive", "'SedgeFoliageLive'"], \
				["SedgeRootsLive", "'SedgeRootsLive'"], \
				["SedgeFoliageDead", "'SedgeFoliageDead'"], \
		
            ]"""

    [[Populate flux indicators]]
    order = 4
    sql   = sql\04_populate_flux_indicators.sql
    
        [[[features]]]
        
            [[[[multi_named_parameters]]]]
            keys = name, change_type, source, sink
            value_sets = """[\
                ["CO2 Production", "Disturbance", "All biomass", "CO2"], \
                ["CH4 Production", "Disturbance", "All biomass", "CH4"], \
                ["CO Production", "Disturbance", "All biomass", "CO"], \
                ["Bio CO2 Emission", "Combined", "Live biomass", "CO2"], \
                ["Bio CH4 Emission", "Combined", "Live biomass", "CH4"], \
                ["Bio CO Emission", "Combined", "Live biomass", "CO"], \
                ["DOM CO2 Emission", "Combined", "DOM", "CO2"], \
                ["DOM CH4 Emission", "Combined", "DOM", "CH4"], \
                ["DOM CO Emission", "Combined", "DOM", "CO"], \
                ["DOM CO2 Emission - Disturbance", "Disturbance", "DOM", "CO2"], \
                ["DOM CH4 Emission - Disturbance", "Disturbance", "DOM", "CH4"], \
                ["DOM CO Emission - Disturbance", "Disturbance", "DOM", "CO"], \
                ["DOM CO2 Emission - Annual Process", "Annual Process", "DOM", "CO2"], \
                ["DOM CH4 Emission - Annual Process", "Annual Process", "DOM", "CH4"], \
                ["DOM CO Emission - Annual Process", "Annual Process", "DOM", "CO"], \
                ["Soft Production", "Disturbance", "Softwood biomass", "Products"], \
                ["Hard Production", "Disturbance", "Hardwood biomass", "Products"], \
                ["DOM Production", "Disturbance", "Snags", "Products"], \
                ["Biomass to Soil", "Combined", "Live biomass", "DOM"], \
                ["Merch Litter Input", "Combined", "Merch", "Stem snag"], \
                ["Foliage Litter Input", "Combined", "Foliage", "Aboveground very fast soil"], \
                ["Other Litter Input", "Combined", "Other", "Other litter"], \
                ["Coarse Litter Input", "Combined", "Coarse roots", "Fast soil"], \
                ["Fine Litter Input", "Combined", "Fine roots", "Very fast soil"], \
                ["V Fast AG to Air", "Combined", "Aboveground very fast soil", "CO2"], \
                ["V Fast BG to Air", "Combined", "Belowground very fast soil", "CO2"], \
                ["Fast AG to Air", "Combined", "Aboveground fast soil", "CO2"], \
                ["Fast BG to Air", "Combined", "Belowground fast soil", "CO2"], \
                ["Medium to Air", "Combined", "Medium soil", "CO2"], \
                ["Slow AG to Air", "Combined", "Aboveground slow soil", "CO2"], \
                ["Slow BG to Air", "Combined", "Belowground slow soil", "CO2"], \
                ["SW Stem Snag to Air", "Combined", "Softwood stem snag", "CO2"], \
                ["SW Branch Snag to Air", "Combined", "Softwood branch snag", "CO2"], \
                ["HW Stem Snag to Air", "Combined", "Hardwood stem snag", "CO2"], \
                ["HW Branch Snag to Air", "Combined", "Hardwood branch snag", "CO2"], \
                ["Merch to Air", "Disturbance", "Merch", "CO2"], \
                ["Foliage to Air", "Disturbance", "Foliage", "CO2"], \
                ["Other to Air", "Disturbance", "Other", "CO2"], \
                ["Coarse to Air", "Disturbance", "Coarse roots", "CO2"], \
                ["Fine to Air", "Disturbance", "Fine roots", "CO2"], \
                ["Black Carbon to Air", "Combined", "Black carbon", "CO2"], \
                ["Peat to Air", "Combined", "Peat", "CO2"], \
                ["Gross Growth AG", "Annual Process", "Atmosphere", "Aboveground live biomass"], \
                ["Gross Growth BG", "Annual Process", "Atmosphere", "Belowground live biomass"], \
                ["Total decline", "Annual Process", "Live biomass", "Overmature decline"], \
                ["Accountable decline", "Annual Process", "Overmature decline", "DOM"], \
				["Gross Growth FeatherMossLive", "Annual Process", "Atmosphere", "FeatherMossLive"], \
                ["Gross Growth SphagnumMossLive", "Annual Process", "Atmosphere", "SphagnumMossLive"], \
				["Gross Growth SedgeFoliageLive", "Annual Process", "Atmosphere", "SedgeFoliageLive"], \
                ["Gross Growth Shrub AG growth", "Annual Process", "Atmosphere", "Shrub aboveground biomass"], \
				["Biomass to DOM camp", "Annual Process", "Live biomass", "DOM"], \
				["FeathermossDead to Acrotelm", "Annual Process", "FeathermossDead", "Acrotelm"], \	
				["Acrotelm to Catotelm", "Annual Process", "Acrotelm", "Catotelm"], \		
            ]"""

    [[Create flux indicator reporting view]]
    order = 5
    sql   = sql\05_create_flux_indicator_view.sql
    
        [[[features]]]
        
            [[[[templated]]]]
            template_provider = sql\classifiers_template_provider.py

    [[Populate flux indicator collections]]
    order = 6
    sql   = sql\06_populate_flux_indicator_collections.sql
    
        [[[features]]]
        
            [[[[multi_named_parameters]]]]
            keys = name,
            value_sets = """[\
                ["Gross growth"], \
                ["Accountable decline"], \
                ["Total decline"], \
                ["Ecosystem removals"], \
                ["Biomass removals"], \
                ["DOM removals"], \
                ["DOM emissions"], \
                ["DOM emissions - annual processes"], \
                ["DOM emissions - Disturbance"], \
                ["Biomass to soil"], \
                ["Decomposition releases"], \
                ["All production"], \
                ["Live production"], \
                ["DOM production"], \
                ["Soft production"], \
                ["Hard production"], \
                ["Disturbance emissions and DOM annual process emissions"], \
                ["Deadwood to air"], \
                ["Litter to air"], \
                ["Soil to air"], \
                ["All emissions"], \
                ["Biomass emissions"], \
                ["CO2 emissions"], \
                ["CO emissions"], \
                ["CH4 emissions"], \
            ]"""
            
    [[Populate aggregate flux indicators]]
    order = 7
    sql   = sql\07_populate_flux_indicator_collection_flux_indicators.sql
    
        [[[features]]]
        
            [[[[multi_named_parameters]]]]
            keys = name, fluxes
            value_sets = """[\
                ["Gross growth", "'gross growth ag', 'gross growth bg'"], \
                ["Accountable decline", "'accountable decline'"], \
                ["Total decline", "'total decline'"], \
                ["Ecosystem removals", "'bio co2 emission', 'bio ch4 emission', 'bio co emission', 'dom co2 emission', 'dom ch4 emission', 'dom co emission', 'soft production', 'hard production', 'dom production'"], \
                ["Biomass removals", "'bio co2 emission', 'bio ch4 emission', 'bio co emission', 'soft production', 'hard production', 'biomass to soil'"], \
                ["DOM removals", "'dom co2 emission', 'dom ch4 emission', 'dom co emission', 'dom production', 'biomass to soil'"], \
                ["DOM emissions", "'dom co2 emission', 'dom ch4 emission', 'dom co emission'"], \
                ["DOM emissions - annual processes", "'dom co2 emission - annual process', 'dom ch4 emission - annual process', 'dom co emission - annual process'"], \
                ["DOM emissions - Disturbance", "'dom co2 emission - disturbance', 'dom ch4 emission - disturbance', 'dom co emission - disturbance'"], \
                ["Biomass to soil", "'biomass to soil'"], \
                ["Decomposition releases", "'dom co2 emission - annual process', 'dom ch4 emission - annual process', 'dom co emission - annual process'"], \
                ["All production", "'soft production', 'hard production', 'dom production'"], \
                ["Live production", "'soft production', 'hard production'"], \
                ["DOM production", "'dom production'"], \
                ["Soft production", "'soft production'"], \
                ["Hard production", "'hard production'"], \
                ["Disturbance emissions and DOM annual process emissions", "'soft production', 'hard production', 'dom production', 'dom co2 emission', 'dom ch4 emission', 'dom co emission', 'bio co2 emission', 'bio ch4 emission', 'bio co emission'"], \
                ["Deadwood to Air", "'fast ag to air', 'fast bg to air', 'medium to air', 'sw stem snag to air', 'sw branch snag to air', 'hw stem snag to air', 'hw branch snag to air'"], \
                ["Litter to Air", "'v fast ag to air', 'slow ag to air'"], \
                ["Soil to air", "'v fast bg to air', 'slow bg to air', 'black carbon to air'"], \
                ["All emissions", "'bio co2 emission', 'bio ch4 emission', 'bio co emission', 'dom co2 emission', 'dom ch4 emission', 'dom co emission'"], \
                ["Biomass emissions", "'bio co2 emission', 'bio ch4 emission', 'bio co emission'"], \
                ["CO2 emissions", "'bio co2 emission', 'dom co2 emission'"], \
                ["CO emissions", "'bio co emission', 'dom co emission'"], \
                ["CH4 emissions", "'bio ch4 emission', 'dom ch4 emission'"], \
            ]"""

    [[Populate stock change indicators - add/subtract components]]
    order = 8
    sql   = sql\08a_populate_stock_changes_add_sub.sql
    
        [[[features]]]
        
            [[[[multi_named_parameters]]]]
            keys = name, add_fluxes, subtract_fluxes
            value_sets = """[\
                ["Delta Total Ecosystem", "'gross growth'", "'ecosystem removals'"], \
                ["Delta Total Biomass", "'gross growth'", "'biomass removals'"], \
                ["Delta Total DOM", "'gross growth'", "'dom removals'"], \
                # Accountable decline is the root decline from overmature losses, when a growth curve
                # turns downward. Total decline includes root losses following a decline in aboveground
                # biomass due to disturbance; in CBM3, the root losses from disturbance disappear, so
                # gross growth is really total growth minus these unaccounted subtractions.
                ["NPP", "'gross growth', 'accountable decline'", "'total decline'"], \
                ["NEP", "'gross growth', 'accountable decline'", "'total decline', 'dom emissions - annual processes'"], \
                ["NBP", "'gross growth', 'accountable decline'", "'total decline', 'disturbance emissions and dom annual process emissions'"], \
            ]"""
            
    [[Populate stock change indicators - add components only]]
    order = 8
    sql   = sql\08b_populate_stock_changes_add_only.sql
    
        [[[features]]]
        
            [[[[multi_named_parameters]]]]
            keys = name, add_fluxes
            value_sets = """[\
                ["Total Litterfall", "'biomass to soil'"], \
                ["Decomposition Releases", "'decomposition releases'"], \
                ["Total Harvest (Biomass + Snags)", "'all production'"], \
                ["Total Harvest (Biomass)", "'live production'"], \
                ["Total Harvest (Snags)", "'dom production'"], \
                ["Softwood Harvest (Biomass)", "'soft production'"], \
                ["Hardwood Harvest (Biomass)", "'hard production'"], \
                ["Deadwood to Atmosphere", "'deadwood to air'"], \
                ["Soil to Atmosphere", "'soil to air'"], \
                ["Total Emissions", "'all emissions'"], \
                ["Total Biomass Emissions", "'biomass emissions'"], \
                ["Total DOM Emissions", "'dom emissions'"], \
                ["Total CO2 Emissions", "'co2 emissions'"], \
                ["Total CO Emissions", "'co emissions'"], \
                ["Total CH4 Emissions", "'ch4 emissions'"], \
                ["Disturbance Losses", "'ecosystem removals'"], \
            ]"""

    [[Create stock change indicators view]]
    order = 9
    sql   = sql\09_create_stock_change_indicators_view.sql
    
        [[[features]]]
        
            [[[[templated]]]]
            template_provider = sql\classifiers_template_provider.py
    
    [[Populate pool indicators view]]
    order = 10
    sql   = sql\10_populate_pool_indicators.sql
    
        [[[features]]]
        
            [[[[multi_named_parameters]]]]
            keys = name, pools
            value_sets = """[\
                ["Total Ecosystem", "All biomass"], \
                ["Total Biomass", "Live biomass"], \
                ["Hardwood Merch", "Hardwood merch"], \
                ["Aboveground Biomass", "Aboveground live biomass"], \
                ["Belowground Biomass", "Belowground live biomass"], \
                ["Deadwood", "deadwood"], \
                ["Litter", "litter"], \
                ["Soil Carbon", "Soil"], \
                ["Dissolved Organic Carbon", "DissolvedOrganicCarbon"], \
            ]"""
            
    [[Create pool indicators view]]
    order = 11
    sql   = sql\11_create_pool_indicators_view.sql
    
        [[[features]]]
        
            [[[[templated]]]]
            template_provider = sql\classifiers_template_provider.py
